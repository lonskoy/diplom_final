# üìå –ë—ç–∫–µ–Ω–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src
‚îú‚îÄ‚îÄ auth
‚îÇ   ‚îú‚îÄ‚îÄ guards
‚îÇ   ‚îú‚îÄ‚îÄ strategy
‚îú‚îÄ‚îÄ chat
‚îú‚îÄ‚îÄ chatOnline
‚îú‚îÄ‚îÄ core
‚îÇ   ‚îú‚îÄ‚îÄ environment
‚îú‚îÄ‚îÄ hotel
‚îú‚îÄ‚îÄ hotel-room
‚îú‚îÄ‚îÄ reservation
‚îî‚îÄ‚îÄ users
```

---

## üîπ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π

### üî∏ –ú–æ–¥—É–ª—å `auth`

**–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**  
–î–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–æ–ª–∏—Ç–∏–∫—É —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –ø–æ 3 —Ç–∏–ø–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: **–∫–ª–∏–µ–Ω—Ç**, **–º–µ–Ω–µ–¥–∂–µ—Ä**, **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**, –∞ —Ç–∞–∫–∂–µ –∑–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### üîπ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ (`src/auth/strategy`)
–í—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ:
1. –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ **cookie**.
2. –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `id` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
3. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –µ–≥–æ `role`.
4. –ï—Å–ª–∏ `role` –ø–æ–¥—Ö–æ–¥–∏—Ç ‚Äì –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –∏–Ω–∞—á–µ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è.

#### üîπ –°–µ—Ä–≤–∏—Å—ã
- **`validateUser(email: string, password: string)`** ‚Äì –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ `usersService.checkUser` –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–≤–µ–¥—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
- **`login({user})`** ‚Äì —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç —Å `id`, `role`, `name`, —à–∏—Ñ—Ä—É–µ—Ç –µ–≥–æ –≤ —Ç–æ–∫–µ–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–∫–µ–Ω.
- **`logout()`** ‚Äì –æ—á–∏—â–∞–µ—Ç —Ç–æ–∫–µ–Ω –≤ **cookie** –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.

#### üîπ –†–æ—É—Ç—ã
- `POST /api/auth/login` ‚Äì –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `POST /api/auth/logout` ‚Äì –≤—ã—Ö–æ–¥

---

### üî∏ –ú–æ–¥—É–ª—å `Chat`

**–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**  
–†–µ–∞–ª–∏–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–∞–ø–∏—Å–∞–Ω–∏—è –æ–±—Ä–∞—â–µ–Ω–∏–π –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º–∏.

#### üîπ –°–µ—Ä–≤–∏—Å—ã
##### **`supportRequest.service`** (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞)
- **`getSupportRequests(user?: string, isActive: boolean)`** ‚Äì –∏—â–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. `isActive` —É–∫–∞–∑—ã–≤–∞–µ—Ç, –æ—Ç–∫—Ä—ã—Ç–æ (`true`) –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç–æ (`false`) –æ–±—Ä–∞—â–µ–Ω–∏–µ.
- **`sendMessage({author, role, name, text}, id)`** ‚Äì –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ.
- **`getMessages(id: string)`** ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ–±—Ä–∞—â–µ–Ω–∏–∏.

##### **`supportRequestClient.service`** (–¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞)
- **`createSupportRequest({title, text}, access_token: string)`** ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É.
- **`findSupportRequestsClient(access_token: string)`** ‚Äì –ø–æ–∏—Å–∫ –≤—Å–µ—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **`markMessagesAsRead(id: string)`** ‚Äì –æ—Ç–º–µ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö.
- **`getUnreadCount(id: string)`** ‚Äì –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

##### **`supportRequestEmployee.service`** (–¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤)
- **`markMessagesAsRead(id: string)`** ‚Äì –æ—Ç–º–µ—Ç–∫–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö.
- **`getUnreadCount(id: string)`** ‚Äì –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞.
- **`closeRequest(id: string)`** ‚Äì –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è.

---

### üî∏ –ú–æ–¥—É–ª—å `Chat-Online`

**–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**  
–†–µ–∞–ª–∏–∑—É–µ—Ç –æ–Ω–ª–∞–π–Ω-—á–∞—Ç –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —á–µ—Ä–µ–∑ **Socket.IO** –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç. –ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º.

---

### üî∏ –ú–æ–¥—É–ª—å `Hotel`

**–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**  
–ü–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–µ–ª—è–º–∏ (**—Å–æ–∑–¥–∞–Ω–∏–µ, –ø–æ–∏—Å–∫, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**).

üö® **–î–æ—Å—Ç—É–ø: —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!**

#### üîπ –†–æ—É—Ç—ã
- `POST /api/admin/hotels` ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–µ–ª—è
- `GET /api/admin/hotels` ‚Äì —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—Ç–µ–ª–µ–π
- `GET /api/admin/hotels/:id` ‚Äì –ø–æ–∏—Å–∫ –æ—Ç–µ–ª—è –ø–æ `id`
- `PATCH /api/admin/hotels/:id` ‚Äì —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–µ–ª—è

#### üîπ –°–µ—Ä–≤–∏—Å—ã
- **`create({title, description, text})`** ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ—Ç–µ–ª—è.
- **`findAll({limit, offset, title})`** ‚Äì –≤—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –æ—Ç–µ–ª–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.
- **`update(id: string, {title, description, text})`** ‚Äì –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–µ–ª—è.

---

### üî∏ –ú–æ–¥—É–ª—å `Hotel-room`

**–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**  
–ü–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–Ω–∞—Ç–∞–º–∏ –æ—Ç–µ–ª—è.

üö® **–î–æ—Å—Ç—É–ø: —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!**

#### üîπ –†–æ—É—Ç—ã
- `POST /api/admin/hotel-room` ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
- `GET /api/admin/hotel-rooms` ‚Äì —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
- `GET /api/admin/hotel-rooms/:id` ‚Äì –ø–æ–∏—Å–∫ –∫–æ–º–Ω–∞—Ç—ã –ø–æ `id`
- `PATCH /api/admin/hotel-rooms/:id` ‚Äì —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã

#### üîπ –°–µ—Ä–≤–∏—Å—ã
- **`create({description, images, isEnable, hotel})`** ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã.
- **`findAll({limit, offset, hotel, isEnabled})`** ‚Äì —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.
- **`findById(id: string)`** ‚Äì –ø–æ–∏—Å–∫ –∫–æ–º–Ω–∞—Ç—ã –ø–æ `id`.
- **`updateById(id: string, {description, images}, files)`** ‚Äì –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã.

---

### üî∏ –ú–æ–¥—É–ª—å `Reservation`

**–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**  
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞–º –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º —É–ø—Ä–∞–≤–ª—è—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ–º–Ω–∞—Ç.

#### üîπ –†–æ—É—Ç—ã
##### `reservation.client.controller` (–¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤)
- `POST /api/client/reservations` ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `GET /api/client/reservations` ‚Äì —Å–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- `DELETE /api/client/reservations/:id` ‚Äì –æ—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

##### `reservation.manager.controller` (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤)
- `GET /api/manager/reservations/:id` ‚Äì –ø–æ–∏—Å–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–∞
- `DELETE /api/manager/reservations/:id` ‚Äì —É–¥–∞–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### üîπ –°–µ—Ä–≤–∏—Å—ã
- **`create({hotelRoom, dateStart, dateEnd}, access_token)`** ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
- **`allReservationsClient(access_token)`** ‚Äì —Å–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–∞.
- **`allReservationsManager(userId)`** ‚Äì –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **`removeReservationClient(access_token, idReservation)`** ‚Äì –æ—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–º.
- **`removeReservationManager(idReservation)`** ‚Äì –æ—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º.

---

### üî∏ –ú–æ–¥—É–ª—å `Users`

**–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**  
–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (`client`, `manager`, `admin`).

#### üîπ –†–æ—É—Ç—ã
##### `client.controller`
- `POST /api/client/register` ‚Äì —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
- `GET /api/client/rooms` ‚Äì —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
- `GET /api/client/find-room` ‚Äì –ø–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
- `POST /api/client/support-requests` ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É

##### `manager.controller` (—Ç–æ–ª—å–∫–æ –¥–ª—è `manager`)
- `GET /api/manager/users` ‚Äì —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

##### `users.controller` (—Ç–æ–ª—å–∫–æ –¥–ª—è `admin`)
- `POST /api/admin/users` ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/admin/users` ‚Äì —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `DELETE /api/admin/users/:id` ‚Äì —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### üîπ –°–µ—Ä–≤–∏—Å—ã
- **`create({email, name, password, contactPhone, role})`** ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **`findById(id)`** ‚Äì –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `id`.
- **`findAll({limit, offset, email, name, contactPhone})`** ‚Äì –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **`removeUser(id)`** ‚Äì —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

üìå –¢–µ–ø–µ—Ä—å –¥–æ–∫—É–º–µ–Ω—Ç –≤—ã–≥–ª—è–¥–∏—Ç –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º –∏ —É–¥–æ–±–Ω—ã–º –¥–ª—è –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è! üöÄ


